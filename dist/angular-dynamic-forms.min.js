angular.module("dynamicForms",[]),angular.element.prototype.closestAttribute=function(t){var e=this;return e.parent()&&"body"!==e.parent()[0].nodeName.toLowerCase()?e.parent().attr(t)?e.parent().attr(t):e.parent().closestAttribute(t):void 0},angular.module("dynamicForms").run(["$templateCache",function(t){t.put("templates/column.html",'<div df-column="<%= column %>" df-form-group data-layout="<%= layout %>">\r\n    <label df-label>\r\n    </label>\r\n    <div>\r\n        <input class="df-form-input" df-input />\r\n        <div class="messages">\r\n            <div class="df-form-input-label"></div>\r\n            <div df-help></div>\r\n            <div df-validation></div>\r\n        </div>\r\n    </div>\r\n</div>')}]),angular.module("dynamicForms").directive("dfFormInput",["DfSchemaService",function(t){return{restrict:"C",link:function(t,e,r){var a=e.closestAttribute("df-mode")||"write";"summary"===a&&e.attr("disabled",!0)}}}]),angular.module("dynamicForms").directive("dfHelp",["$compile","DfSchemaService",function(t,e){return{restrict:"EA",priority:1050,compile:function(t,r){var a=t.closestAttribute("df-schema"),i=t.closestAttribute("df-column"),n=e.extractHelp(a,i);t.removeAttr("df-help"),t.addClass("extra-help"),t.append(n)}}}]),angular.module("dynamicForms").directive("dfInput",["$compile","DfSchemaService",function(t,e){return{restrict:"EA",priority:1050,compile:function(r,a){var i=r.closestAttribute("df-schema"),n=r.closestAttribute("df-column"),c=r.closestAttribute("df-model-instance")||"model",l=r.closestAttribute("df-controller"),o=r.closestAttribute("df-model-instance"),m=e.extractValidators(i,n),u=e.extractColumn(i,n);r.removeAttr("df-input");var s;return"select"==u.type?(s=angular.element('<select class="df-form-input"></select>'),r.replaceWith(s)):s=r,_.each(m,function(t,e){s.attr(e,_.template(t)({controller:l,model:o}))}),s.attr("ng-required",m["ng-required"]||"true"),s.attr("type",u.type||"text"),s.attr("id",n),s.attr("name",n),s.attr("ng-model",c+"."+n),function(e,r){t(r)(e)}}}}]),angular.module("dynamicForms").directive("dfLabel",["$compile","DfSchemaService",function(t,e){return{restrict:"EA",priority:1075,compile:function(t,r){var a=t.closestAttribute("df-schema"),i=t.closestAttribute("df-column"),n=e.extractLabel(a,i);t.removeAttr("df-label"),t.attr("for",i),t.prepend(n)}}}]),angular.module("dynamicForms").directive("dfModel",["$compile","$templateCache","DfSchemaService",function(t,e,r){return{restrict:"EA",priority:1100,compile:function(t,a){t.removeAttr("df-model");var i=r.extractColumns(a.dfSchema),n=(a.mode,e.get("templates/column.html"));_.each(i,function(r){t.append(e.get(r.template)||_.template(n)({column:r.column,layout:"form"}))})}}}]),angular.module("dynamicForms").directive("dfValidation",["$compile","DfSchemaService",function(t,e){return{restrict:"EA",priority:1025,compile:function(t,r){var a=t.closestAttribute("df-schema"),i=t.closestAttribute("df-column"),n=e.extractValidation(a,i);t.removeAttr("df-validation"),t.addClass("validation-message"),t.append(n)}}}]),angular.module("dynamicForms").service("DfSchemaService",["$injector",function(t){this.extractColumns=function(e){return this.schema=t.get(e),_.map(this.schema,function(t){return{column:t.column,template:t.template}})},this.extractColumn=function(e,r){return this.schema=t.get(e),_.find(this.schema,{column:r})},this.extractValidators=function(e,r){return this.schema=t.get(e),_.chain(this.schema).where({column:r}).pluck("validators").value().pop()},this.extractValidation=function(e,r){return this.schema=t.get(e),_.chain(this.schema).where({column:r}).pluck("validation").value().pop()},this.extractLabel=function(e,r){return this.schema=t.get(e),_.chain(this.schema).where({column:r}).pluck("label").value().pop()},this.extractHelp=function(e,r){return this.schema=t.get(e),_.chain(this.schema).where({column:r}).pluck("help").value().pop()}}]);