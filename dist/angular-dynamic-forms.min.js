angular.module("dynamicForms",[]),angular.element.prototype.closestAttribute=function(t){var e=this;return e.parent()&&"body"!==e.parent()[0].nodeName.toLowerCase()?e.parent().attr(t)?e.parent().attr(t):e.parent().closestAttribute(t):void 0},angular.module("dynamicForms").run(["$templateCache",function(t){t.put("templates/column.html",'<div df-column="<%= column %>" df-form-group df-mode="<%= mode %>">\r\n    <label df-label class="df-label">\r\n    </label>\r\n    <div>\r\n        <input class="df-input" df-input />\r\n        <div class="messages">\r\n            <div class="df-form-input-label"></div>\r\n            <div df-help class="df-help"></div>\r\n            <div df-validation class="df-validation"></div>\r\n        </div>\r\n    </div>\r\n</div>')}]),angular.module("dynamicForms").directive("dfColumn",["Utils",function(t){return{restrict:"A",link:function(e,r,i){var a=r.closestAttribute("df-mode")||"write";r.addClass("df-column "+t.classFor(a))}}}]),angular.module("dynamicForms").directive("dfHelp",["$compile","DfSchemaService",function(t,e){return{restrict:"EA",priority:1050,compile:function(t,r){var i=t.closestAttribute("df-schema"),a=t.closestAttribute("df-column"),n=e.extractHelp(i,a);t.removeAttr("df-help"),t.addClass("df-help"),t.append(n)}}}]),angular.module("dynamicForms").directive("dfInput",["$compile","DfSchemaService",function(t,e){return{restrict:"EA",priority:1050,compile:function(r,i){var a=r.closestAttribute("df-schema"),n=r.closestAttribute("df-column"),c=r.closestAttribute("df-model-instance")||"model",l=r.closestAttribute("df-controller"),o=r.closestAttribute("df-mode")||"write",d=r.closestAttribute("df-model-instance"),s=e.extractValidators(a,n),u=e.extractColumn(a,n);r.removeAttr("df-input");var m;return"select"==(u&&u.type)?(m=angular.element('<select class="df-input"></select>'),r.replaceWith(m)):m=r,_.each(s,function(t,e){m.attr(e,_.template(t)({controller:l,model:d}))}),m.attr("ng-required",s&&s["ng-required"]||"true"),m.attr("type",u&&u.type||"text"),m.attr("id",n),m.attr("name",n),m.attr("ng-model",c+"."+n),m.attr("disabled","summary"===o),function(e,r){t(r)(e)}}}}]),angular.module("dynamicForms").directive("dfLabel",["$compile","DfSchemaService",function(t,e){return{restrict:"EA",priority:1075,compile:function(t,r){var i=t.closestAttribute("df-schema"),a=t.closestAttribute("df-column"),n=e.extractLabel(i,a);t.removeAttr("df-label"),t.attr("for",a),t.prepend(n)}}}]),angular.module("dynamicForms").directive("dfModel",["$compile","$templateCache","DfSchemaService",function(t,e,r){return{restrict:"EA",priority:1100,compile:function(t,i){t.removeAttr("df-model");var a=r.extractColumns(i.dfSchema),n=i.dfMode,c=e.get("templates/column.html");_.each(a,function(r){t.append(e.get(r.template)||_.template(c)({column:r.column,mode:n}))})}}}]),angular.module("dynamicForms").directive("dfValidation",["$compile","DfSchemaService",function(t,e){return{restrict:"EA",priority:1025,compile:function(t,r){var i=t.closestAttribute("df-schema"),a=t.closestAttribute("df-column"),n=e.extractValidation(i,a);t.removeAttr("df-validation"),t.addClass("df-validation"),t.append(n)}}}]),angular.module("dynamicForms").service("DfSchemaService",["$injector",function(t){this.extractColumns=function(e){return this.schema=t.get(e),_.map(this.schema,function(t){return{column:t.column,template:t.template}})},this.extractColumn=function(e,r){return this.schema=t.get(e),_.find(this.schema,{column:r})},this.extractValidators=function(e,r){return this.schema=t.get(e),_.chain(this.schema).where({column:r}).pluck("validators").value().pop()},this.extractValidation=function(e,r){return this.schema=t.get(e),_.chain(this.schema).where({column:r}).pluck("validation").value().pop()},this.extractLabel=function(e,r){return this.schema=t.get(e),_.chain(this.schema).where({column:r}).pluck("label").value().pop()},this.extractHelp=function(e,r){return this.schema=t.get(e),_.chain(this.schema).where({column:r}).pluck("help").value().pop()}}]),angular.module("dynamicForms").service("Utils",function(){var t={forMode:{write:"df-column-write",read:"df-column-read",edit:"df-column-edit"}};this.classFor=function(e){return t.forMode[e]}});