angular.module("dynamicForms",[]),angular.module("dynamicForms").run(["$templateCache",function(t){t.put("templates/column.html",'<div df-column="<%= column %>" sy-form-group data-layout="<%= layout %>">\r\n    <label df-label>\r\n    </label>\r\n    <div>\r\n        <input class="df-form-input" df-input />\r\n        <div class="messages">\r\n            <div class="df-form-input-label"></div>\r\n            <div df-help></div>\r\n            <div df-validation></div>\r\n        </div>\r\n    </div>\r\n</div>')}]),angular.module("dynamicForms").service("DfSchemaService",["$injector",function(t){this.extractColumns=function(e){return this.schema=t.get(e),_.map(this.schema,function(t){return{column:t.column,template:t.template}})},this.extractColumn=function(e,r){return this.schema=t.get(e),_.find(this.schema,{column:r})},this.extractValidators=function(e,r){return this.schema=t.get(e),_.chain(this.schema).where({column:r}).pluck("validators").value().pop()},this.extractValidation=function(e,r){return this.schema=t.get(e),_.chain(this.schema).where({column:r}).pluck("validation").value().pop()},this.extractLabel=function(e,r){return this.schema=t.get(e),_.chain(this.schema).where({column:r}).pluck("label").value().pop()},this.extractHelp=function(e,r){return this.schema=t.get(e),_.chain(this.schema).where({column:r}).pluck("help").value().pop()}}]),angular.module("dynamicForms").directive("dfFormInput",["DfSchemaService",function(t){return{restrict:"C",link:function(t,e,r){var i=e.closestAttribute("df-mode")||"write";"summary"===i&&e.attr("disabled",!0)}}}]),angular.module("dynamicForms").directive("dfHelp",["$compile","DfSchemaService",function(t,e){return{restrict:"EA",priority:1050,compile:function(t,r){var i=t.closestAttribute("df-schema"),a=t.closestAttribute("df-column"),c=e.extractHelp(i,a);t.removeAttr("df-help"),t.addClass("extra-help"),t.append(c)}}}]),angular.module("dynamicForms").directive("dfInput",["$compile","DfSchemaService",function(t,e){return{restrict:"EA",priority:1050,compile:function(r,i){var a=r.closestAttribute("df-schema"),c=r.closestAttribute("df-column"),n=r.closestAttribute("df-model-instance")||"model",l=r.closestAttribute("df-controller"),o=r.closestAttribute("df-model-instance"),m=e.extractValidators(a,c),u=e.extractColumn(a,c);r.removeAttr("df-input");var s;return"select"==u.type?(s=angular.element('<select class="df-form-input"></select>'),r.replaceWith(s)):s=r,_.each(m,function(t,e){s.attr(e,_.template(t)({controller:l,model:o}))}),s.attr("ng-required",m["ng-required"]||"true"),s.attr("type",u.type||"text"),s.attr("id",c),s.attr("name",c),s.attr("ng-model",n+"."+c),function(e,r){t(r)(e)}}}}]),angular.module("dynamicForms").directive("dfLabel",["$compile","DfSchemaService",function(t,e){return{restrict:"EA",priority:1075,compile:function(t,r){var i=t.closestAttribute("df-schema"),a=t.closestAttribute("df-column"),c=e.extractLabel(i,a);t.removeAttr("df-label"),t.attr("for",a),t.prepend(c)}}}]),angular.module("dynamicForms").directive("dfModel",["$compile","$templateCache","DfSchemaService",function(t,e,r){return{restrict:"EA",priority:1100,compile:function(t,i){t.removeAttr("df-model");var a=r.extractColumns(i.dfSchema),c=(i.mode,e.get("templates/column.html"));_.each(a,function(r){t.append(e.get(r.template)||_.template(c)({column:r.column,layout:"form"}))})}}}]),angular.module("dynamicForms").directive("dfValidation",["$compile","DfSchemaService",function(t,e){return{restrict:"EA",priority:1025,compile:function(t,r){var i=t.closestAttribute("df-schema"),a=t.closestAttribute("df-column"),c=e.extractValidation(i,a);t.removeAttr("df-validation"),t.addClass("validation-message"),t.append(c)}}}]);